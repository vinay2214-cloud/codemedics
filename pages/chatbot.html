<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Symptom Checker - CodeMedics</title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Malayalam:wght@400;600&family=Noto+Sans+Tamil:wght@400;600&family=Noto+Sans+Telugu:wght@400;600&family=Noto+Sans+Bengali:wght@400;600&family=Noto+Nastaliq+Urdu:wght@400;600&family=Noto+Sans+Devanagari:wght@400;600&display=swap" rel="stylesheet">
    <style>
        .chat-container {
            max-width: 600px;
            margin: 40px auto;
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        }
        .symptom-btn {
            margin: 5px;
            padding: 10px 16px;
            border: 1px solid #e5e7eb;
            border-radius: 50px;
            background: white;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }
        .symptom-btn:hover {
            background: #f3f4f6;
            transform: translateY(-1px);
        }
        .symptom-btn.selected {
            background: #dbeafe;
            border-color: #3b82f6;
            color: #1d4ed8;
        }
        #result {
            margin-top: 30px;
            padding: 20px;
            border-radius: 12px;
            display: none;
        }
        .alert-high {
            background: #fef2f2;
            border: 1px solid #fecaca;
            color: #b91c1c;
        }
        .alert-medium {
            background: #ffedd5;
            border: 1px solid #fed7aa;
            color: #c2410c;
        }
        .alert-low {
            background: #ecfdf5;
            border: 1px solid #ccfbf1;
            color: #065f46;
        }
    </style>
</head>
<body>
    <header class="cm-header">
        <div class="container header-content">
            <a href="../index.html" class="brand-title">CodeMedics</a>
            <select id="language-switcher" class="lang-select">
                <option value="en">English</option>
                <option value="ml">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</option>
                <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
                <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
                <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
                <option value="ur">ÿßÿ±ÿØŸà</option>
            </select>
        </div>
    </header>

    <main>
        <div class="chat-container">
            <h2 data-i18n="aiTitle">AI Health Assistant</h2>
            <p data-i18n="aiDesc">Select your symptoms. AI will analyze risk.</p>

            <div id="symptom-buttons">
                <!-- Buttons will be generated by JS -->
            </div>

            <div id="result">
                <h3 data-i18n="aiResult">Analysis Result</h3>
                <p id="risk-message"></p>
                <p id="action-message"></p>
            </div>

            <button id="submit-btn" class="cm-btn primary" style="margin-top: 20px; display: none;" data-i18n="submit">Submit & Notify Clinic</button>
        </div>
    </main>

    <script src="../assets/js/i18n.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const lang = localStorage.getItem('userLang') || 'en';
            translatePage(lang);

            // Symptom translations
            const symptomTranslations = {
                en: ["Fever", "Cough", "Headache", "Fatigue", "Body Pain", "Loss of Taste", "Shortness of Breath"],
                ml: ["‡¥™‡¥®‡¥ø", "‡¥ö‡µÅ‡¥Æ", "‡¥§‡¥≤‡¥µ‡µá‡¥¶‡¥®", "‡¥Ö‡¥ß‡¥ø‡¥ï‡¥Ç ‡¥ï‡µç‡¥∑‡µÄ‡¥£‡¥Ç", "‡¥∂‡¥∞‡µÄ‡¥∞‡¥µ‡µá‡¥¶‡¥®", "‡¥∞‡µÅ‡¥ö‡¥ø‡¥ï‡µá‡¥ü‡µç", "‡¥∂‡µç‡¥µ‡¥æ‡¥∏‡¥§‡¥ü‡¥∏‡µç‡¥∏‡¥Ç"],
                hi: ["‡§¨‡•Å‡§ñ‡§æ‡§∞", "‡§ñ‡§æ‡§Ç‡§∏‡•Ä", "‡§∏‡§ø‡§∞‡§¶‡§∞‡•ç‡§¶", "‡§•‡§ï‡§æ‡§®", "‡§∂‡§∞‡•Ä‡§∞ ‡§¶‡§∞‡•ç‡§¶", "‡§∏‡•ç‡§µ‡§æ‡§¶ ‡§ï‡§æ ‡§®‡•Å‡§ï‡§∏‡§æ‡§®", "‡§∏‡§æ‡§Ç‡§∏ ‡§≤‡•á‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡§ï‡§≤‡•Ä‡§´"],
                ta: ["‡Æï‡Ææ‡ÆØ‡Øç‡Æö‡Øç‡Æö‡Æ≤‡Øç", "‡Æá‡Æ∞‡ØÅ‡ÆÆ‡Æ≤‡Øç", "‡Æ§‡Æ≤‡Øà‡Æµ‡Æ≤‡Æø", "‡Æö‡Øã‡Æ∞‡Øç‡Æµ‡ØÅ", "‡Æâ‡Æü‡Æ≤‡Øç ‡Æµ‡Æ≤‡Æø", "‡Æö‡ØÅ‡Æµ‡Øà ‡Æá‡Æ¥‡Æ™‡Øç‡Æ™‡ØÅ", "‡ÆÆ‡ØÇ‡Æö‡Øç‡Æö‡ØÅ‡Æ§‡Øç ‡Æ§‡Æø‡Æ£‡Æ±‡Æ≤‡Øç"],
                te: ["‡∞ú‡±ç‡∞µ‡∞∞‡∞Ç", "‡∞¶‡∞ó‡±ç‡∞ó‡±Å", "‡∞§‡∞≤‡∞®‡±ä‡∞™‡±ç‡∞™‡∞ø", "‡∞Ö‡∞≤‡∞∏‡∞ü", "‡∞∂‡∞∞‡±Ä‡∞∞ ‡∞®‡±ä‡∞™‡±ç‡∞™‡∞ø", "‡∞∞‡±Å‡∞ö‡∞ø ‡∞ï‡±ã‡∞≤‡±ç‡∞™‡±ã‡∞µ‡∞°‡∞Ç", "‡∞ä‡∞™‡∞ø‡∞∞‡∞ø ‡∞Ü‡∞°‡∞ï‡∞™‡±ã‡∞µ‡∞°‡∞Ç"],
                ur: ["ÿ®ÿÆÿßÿ±", "⁄©⁄æÿßŸÜÿ≥€å", "ÿ≥ÿ± ÿØÿ±ÿØ", "ÿ™⁄æ⁄©ÿßŸàŸπ", "ÿ¨ÿ≥ŸÖÿßŸÜ€å ÿØÿ±ÿØ", "ÿ∞ÿßÿ¶ŸÇ€Å ⁄©ÿß ŸÜŸÇÿµÿßŸÜ", "ÿ≥ÿß€Å ŸÑ€åŸÜ€í ŸÖ€å⁄∫ ÿØÿ¥Ÿàÿßÿ±€å"]
            };

            // Risk logic (simulated AI)
            const getRiskAnalysis = (symptoms, lang) => {
                const highRiskCombos = [
                    ["Fever", "Cough", "Shortness of Breath"],
                    ["Fever", "Loss of Taste"],
                    ["Cough", "Shortness of Breath", "Fatigue"]
                ];

                const mediumRiskCombos = [
                    ["Fever", "Cough"],
                    ["Fever", "Headache", "Body Pain"],
                    ["Cough", "Fatigue"]
                ];

                // Check for high risk
                for (let combo of highRiskCombos) {
                    if (combo.every(s => symptoms.includes(s))) {
                        return {
                            level: "high",
                            message: {
                                en: "‚ö†Ô∏è High Risk: Possible TB or COVID. Urgent clinic visit required.",
                                ml: "‚ö†Ô∏è ‡¥â‡¥Ø‡µº‡¥®‡µç‡¥® ‡¥Ö‡¥™‡¥ï‡¥ü‡¥∏‡¥æ‡¥ß‡µç‡¥Ø‡¥§: ‡¥∏‡¥æ‡¥ß‡µç‡¥Ø‡¥Æ‡¥æ‡¥Ø ‡¥ï‡µç‡¥∑‡¥Ø‡¥∞‡µã‡¥ó‡¥Ç ‡¥Ö‡¥≤‡µç‡¥≤‡µÜ‡¥ô‡µç‡¥ï‡¥ø‡µΩ COVID. ‡¥Ö‡¥ü‡¥ø‡¥Ø‡¥®‡µç‡¥§‡¥∞ ‡¥ï‡µç‡¥≤‡¥ø‡¥®‡¥ø‡¥ï‡µç ‡¥∏‡¥®‡µç‡¥¶‡µº‡¥∂‡¥®‡¥Ç ‡¥Ü‡¥µ‡¥∂‡µç‡¥Ø‡¥Æ‡¥æ‡¥£‡µç.",
                                hi: "‚ö†Ô∏è ‡§â‡§ö‡•ç‡§ö ‡§ú‡•ã‡§ñ‡§ø‡§Æ: ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§ø‡§§ ‡§ü‡•Ä‡§¨‡•Ä ‡§Ø‡§æ COVID‡•§ ‡§§‡§§‡•ç‡§ï‡§æ‡§≤ ‡§ï‡•ç‡§≤‡§ø‡§®‡§ø‡§ï ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à‡•§",
                                ta: "‚ö†Ô∏è ‡Æâ‡ÆØ‡Æ∞‡Øç ‡Æá‡Æü‡Æ∞‡Øç‡Æ™‡Ææ‡Æü‡ØÅ: ‡Æö‡Ææ‡Æ§‡Øç‡Æ§‡Æø‡ÆØ‡ÆÆ‡Ææ‡Æ© ‡Æü‡Æø.‡Æ™‡Æø ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ COVID. ‡ÆÖ‡Æµ‡Æö‡Æ∞ ‡Æï‡Æø‡Æ≥‡Æø‡Æ©‡Æø‡Æï‡Øç ‡Æ™‡Ææ‡Æ∞‡Øç‡Æµ‡Øà ‡Æ§‡Øá‡Æµ‡Øà.",
                                te: "‚ö†Ô∏è ‡∞π‡±à ‡∞∞‡∞ø‡∞∏‡±ç‡∞ï‡±ç: ‡∞∏‡∞æ‡∞ß‡±ç‡∞Ø‡∞Æ‡±à‡∞® TB ‡∞≤‡±á‡∞¶‡∞æ COVID. ‡∞Ö‡∞§‡±ç‡∞Ø‡∞µ‡∞∏‡∞∞ ‡∞ï‡±ç‡∞≤‡∞ø‡∞®‡∞ø‡∞ï‡±ç ‡∞∏‡∞Ç‡∞¶‡∞∞‡±ç‡∞∂‡∞® ‡∞Ö‡∞µ‡∞∏‡∞∞‡∞Ç.",
                                ur: "‚ö†Ô∏è ÿßŸàŸÜ⁄Üÿß ÿÆÿ∑ÿ±: ŸÖŸÖ⁄©ŸÜ€Å Ÿπ€å ÿ®€å €åÿß ⁄©ŸàŸà⁄à€î ŸÅŸàÿ±€å ⁄©ŸÑ€åŸÜ⁄© ⁄©ÿß ÿØŸàÿ±€Å ÿØÿ±⁄©ÿßÿ± €Å€í€î"
                            },
                            action: {
                                en: "Clinic & District Health Officer notified automatically.",
                                ml: "‡¥ï‡µç‡¥≤‡¥ø‡¥®‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥Ç ‡¥ú‡¥ø‡¥≤‡µç‡¥≤‡¥æ ‡¥Ü‡¥∞‡µã‡¥ó‡µç‡¥Ø ‡¥ì‡¥´‡µÄ‡¥∏‡¥±‡µÅ‡¥Ç ‡¥Ø‡¥æ‡¥®‡µç‡¥§‡µç‡¥∞‡¥ø‡¥ï‡¥Æ‡¥æ‡¥Ø‡¥ø ‡¥Ö‡¥±‡¥ø‡¥Ø‡¥ø‡¥ï‡µç‡¥ï‡¥™‡µç‡¥™‡µÜ‡¥ü‡µç‡¥ü‡µÅ.",
                                hi: "‡§ï‡•ç‡§≤‡§ø‡§®‡§ø‡§ï ‡§î‡§∞ ‡§ú‡§ø‡§≤‡§æ ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞‡•Ä ‡§ï‡•ã ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§∏‡•Ç‡§ö‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ‡•§",
                                ta: "‡Æï‡Æø‡Æ≥‡Æø‡Æ©‡Æø‡Æï‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡Ææ‡Æµ‡Æü‡Øç‡Æü ‡Æö‡ØÅ‡Æï‡Ææ‡Æ§‡Ææ‡Æ∞ ‡ÆÖ‡Æ≤‡ØÅ‡Æµ‡Æ≤‡Æ∞‡Øç ‡Æ§‡Ææ‡Æ©‡Ææ‡Æï‡Æµ‡Øá ‡Æ§‡ØÜ‡Æ∞‡Æø‡Æµ‡Æø‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ.",
                                te: "‡∞ï‡±ç‡∞≤‡∞ø‡∞®‡∞ø‡∞ï‡±ç & ‡∞ú‡∞ø‡∞≤‡±ç‡∞≤‡∞æ ‡∞Ü‡∞∞‡±ã‡∞ó‡±ç‡∞Ø ‡∞Ö‡∞ß‡∞ø‡∞ï‡∞æ‡∞∞‡∞ø ‡∞∏‡±ç‡∞µ‡∞Ø‡∞Ç‡∞ö‡∞æ‡∞≤‡∞ï‡∞Ç‡∞ó‡∞æ ‡∞π‡±Ü‡∞ö‡±ç‡∞ö‡∞∞‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡±ç‡∞°‡∞æ‡∞∞‡±Å.",
                                ur: "⁄©ŸÑ€åŸÜ⁄© ÿßŸàÿ± ÿ∂ŸÑÿπ€å ÿµÿ≠ÿ™ ÿßŸÅÿ≥ÿ± ⁄©Ÿà ÿÆŸàÿØ ÿ®ÿÆŸàÿØ ŸÖÿ∑ŸÑÿπ ⁄©€åÿß ⁄Ø€åÿß€î"
                            }
                        };
                    }
                }

                // Check for medium risk
                for (let combo of mediumRiskCombos) {
                    if (combo.every(s => symptoms.includes(s))) {
                        return {
                            level: "medium",
                            message: {
                                en: "üü° Medium Risk: Possible viral infection. Visit clinic within 24 hours.",
                                ml: "üü° ‡¥Æ‡¥ø‡¥§‡¥Æ‡¥æ‡¥Ø ‡¥Ö‡¥™‡¥ï‡¥ü‡¥∏‡¥æ‡¥ß‡µç‡¥Ø‡¥§: ‡¥∏‡¥æ‡¥ß‡µç‡¥Ø‡¥Æ‡¥æ‡¥Ø ‡¥µ‡µà‡¥±‡µΩ ‡¥Ö‡¥£‡µÅ‡¥¨‡¥æ‡¥ß. 24 ‡¥Æ‡¥£‡¥ø‡¥ï‡µç‡¥ï‡µÇ‡¥±‡¥ø‡¥®‡µÅ‡¥≥‡µç‡¥≥‡¥ø‡µΩ ‡¥ï‡µç‡¥≤‡¥ø‡¥®‡¥ø‡¥ï‡µç ‡¥∏‡¥®‡µç‡¥¶‡µº‡¥∂‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï.",
                                hi: "üü° ‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§ú‡•ã‡§ñ‡§ø‡§Æ: ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§ø‡§§ ‡§µ‡§æ‡§Ø‡§∞‡§≤ ‡§∏‡§Ç‡§ï‡•ç‡§∞‡§Æ‡§£‡•§ 24 ‡§ò‡§Ç‡§ü‡•á ‡§ï‡•á ‡§≠‡•Ä‡§§‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§®‡§ø‡§ï ‡§ú‡§æ‡§è‡§Ç‡•§",
                                ta: "üü° ‡Æ®‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æ∞ ‡Æá‡Æü‡Æ∞‡Øç‡Æ™‡Ææ‡Æü‡ØÅ: ‡Æö‡Ææ‡Æ§‡Øç‡Æ§‡Æø‡ÆØ‡ÆÆ‡Ææ‡Æ© ‡Æµ‡Øà‡Æ∞‡Æ∏‡Øç ‡Æ§‡Øä‡Æ±‡Øç‡Æ±‡ØÅ. 24 ‡ÆÆ‡Æ£‡Æø‡Æ®‡Øá‡Æ∞‡Æ§‡Øç‡Æ§‡Æø‡Æ±‡Øç‡Æï‡ØÅ‡Æ≥‡Øç ‡Æï‡Æø‡Æ≥‡Æø‡Æ©‡Æø‡Æï‡Øç‡Æï‡Æø‡Æ±‡Øç‡Æï‡ØÅ ‡Æö‡ØÜ‡Æ≤‡Øç‡Æ≤‡Æµ‡ØÅ‡ÆÆ‡Øç.",
                                te: "üü° ‡∞Æ‡±Ä‡∞°‡∞ø‡∞Ø‡∞Ç ‡∞∞‡∞ø‡∞∏‡±ç‡∞ï‡±ç: ‡∞∏‡∞æ‡∞ß‡±ç‡∞Ø‡∞Æ‡±à‡∞® ‡∞µ‡±à‡∞∞‡∞≤‡±ç ‡∞á‡∞®‡±ç‡∞´‡±Ü‡∞ï‡±ç‡∞∑‡∞®‡±ç. 24 ‡∞ó‡∞Ç‡∞ü‡∞≤‡±ç‡∞≤‡±ã‡∞™‡±Å ‡∞ï‡±ç‡∞≤‡∞ø‡∞®‡∞ø‡∞ï‡±ç‚Äå‡∞ï‡±Å ‡∞µ‡±Ü‡∞≥‡±ç‡∞≤‡∞Ç‡∞°‡∞ø.",
                                ur: "üü° ÿØÿ±ŸÖ€åÿßŸÜ€å ÿÆÿ∑ÿ±: ŸÖŸÖ⁄©ŸÜ€Å Ÿàÿßÿ¶ÿ±ŸÑ ÿßŸÜŸÅ€å⁄©ÿ¥ŸÜ€î 24 ⁄Ø⁄æŸÜŸπŸà⁄∫ ⁄©€í ÿßŸÜÿØÿ± ⁄©ŸÑ€åŸÜ⁄© ÿ¨ÿßÿ¶€å⁄∫€î"
                            },
                            action: {
                                en: "Record saved. Clinic notified.",
                                ml: "‡¥±‡µÜ‡¥ï‡µç‡¥ï‡µã‡µº‡¥°‡µç ‡¥∏‡¥Ç‡¥∞‡¥ï‡µç‡¥∑‡¥ø‡¥ö‡µç‡¥ö‡µÅ. ‡¥ï‡µç‡¥≤‡¥ø‡¥®‡¥ø‡¥ï‡µç‡¥ï‡µç ‡¥Ö‡¥±‡¥ø‡¥Ø‡¥ø‡¥ö‡µç‡¥ö‡µÅ.",
                                hi: "‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§° ‡§∏‡§π‡•á‡§ú‡§æ ‡§ó‡§Ø‡§æ‡•§ ‡§ï‡•ç‡§≤‡§ø‡§®‡§ø‡§ï ‡§ï‡•ã ‡§∏‡•Ç‡§ö‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ‡•§",
                                ta: "‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æö‡Øá‡ÆÆ‡Æø‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ. ‡Æï‡Æø‡Æ≥‡Æø‡Æ©‡Æø‡Æï‡Øç‡Æï‡Æø‡Æ±‡Øç‡Æï‡ØÅ ‡Æ§‡ØÜ‡Æ∞‡Æø‡Æµ‡Æø‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ.",
                                te: "‡∞∞‡∞ø‡∞ï‡∞æ‡∞∞‡±ç‡∞°‡±Å ‡∞∏‡±á‡∞µ‡±ç ‡∞ö‡±á‡∞Ø‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø. ‡∞ï‡±ç‡∞≤‡∞ø‡∞®‡∞ø‡∞ï‡±ç‚Äå‡∞ï‡±Å ‡∞®‡±ã‡∞ü‡∞ø‡∞´‡±à ‡∞ö‡±á‡∞Ø‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø.",
                                ur: "ÿ±€å⁄©ÿßÿ±⁄à ŸÖÿ≠ŸÅŸàÿ∏ ⁄©€åÿß ⁄Ø€åÿß€î ⁄©ŸÑ€åŸÜ⁄© ⁄©Ÿà ŸÖÿ∑ŸÑÿπ ⁄©€åÿß ⁄Ø€åÿß€î"
                            }
                        };
                    }
                }

                // Low risk
                return {
                    level: "low",
                    message: {
                        en: "üü¢ Low Risk: Minor symptoms. Rest and hydrate.",
                        ml: "üü¢ ‡¥ï‡µÅ‡¥±‡¥û‡µç‡¥û ‡¥Ö‡¥™‡¥ï‡¥ü‡¥∏‡¥æ‡¥ß‡µç‡¥Ø‡¥§: ‡¥ö‡µÜ‡¥±‡¥ø‡¥Ø ‡¥≤‡¥ï‡µç‡¥∑‡¥£‡¥ô‡µç‡¥ô‡µæ. ‡¥µ‡¥ø‡¥∂‡µç‡¥∞‡¥Æ‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï, ‡¥ú‡¥≤‡¥Ç ‡¥ï‡¥¥‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï.",
                        hi: "üü¢ ‡§ï‡§Æ ‡§ú‡•ã‡§ñ‡§ø‡§Æ: ‡§π‡§≤‡•ç‡§ï‡•á ‡§≤‡§ï‡•ç‡§∑‡§£‡•§ ‡§Ü‡§∞‡§æ‡§Æ ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§™‡§æ‡§®‡•Ä ‡§™‡§ø‡§è‡§Ç‡•§",
                        ta: "üü¢ ‡Æï‡ØÅ‡Æ±‡Øà‡Æ®‡Øç‡Æ§ ‡Æá‡Æü‡Æ∞‡Øç‡Æ™‡Ææ‡Æü‡ØÅ: ‡Æö‡Æø‡Æ±‡Æø‡ÆØ ‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡Æï‡Æ≥‡Øç. ‡Æì‡ÆØ‡Øç‡Æµ‡ØÜ‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç, ‡Æ§‡Æ£‡Øç‡Æ£‡ØÄ‡Æ∞‡Øç ‡Æï‡ØÅ‡Æü‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.",
                        te: "üü¢ ‡∞§‡∞ï‡±ç‡∞ï‡±Å‡∞µ ‡∞∞‡∞ø‡∞∏‡±ç‡∞ï‡±ç: ‡∞ö‡∞ø‡∞®‡±ç‡∞® ‡∞≤‡∞ï‡±ç‡∞∑‡∞£‡∞æ‡∞≤‡±Å. ‡∞µ‡∞ø‡∞∂‡±ç‡∞∞‡∞æ‡∞Ç‡∞§‡∞ø ‡∞§‡±Ä‡∞∏‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞π‡±à‡∞°‡±ç‡∞∞‡±á‡∞ü‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø.",
                        ur: "üü¢ ⁄©ŸÖ ÿÆÿ∑ÿ±: ŸÖÿπŸÖŸàŸÑ€å ÿπŸÑÿßŸÖÿßÿ™€î ÿ¢ÿ±ÿßŸÖ ⁄©ÿ±€å⁄∫ ÿßŸàÿ± ŸæÿßŸÜ€å Ÿæ€åÿ¶€å⁄∫€î"
                    },
                    action: {
                        en: "No immediate action required.",
                        ml: "‡¥â‡¥ü‡µª ‡¥®‡¥ü‡¥™‡¥ü‡¥ø ‡¥Ü‡¥µ‡¥∂‡µç‡¥Ø‡¥Æ‡¥ø‡¥≤‡µç‡¥≤.",
                        hi: "‡§§‡§§‡•ç‡§ï‡§æ‡§≤ ‡§ï‡§æ‡§∞‡•ç‡§∞‡§µ‡§æ‡§à ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§",
                        ta: "‡Æâ‡Æü‡Æ©‡Æü‡Æø ‡Æ®‡Æü‡Æµ‡Æü‡Æø‡Æï‡Øç‡Æï‡Øà ‡Æ§‡Øá‡Æµ‡Øà‡ÆØ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà.",
                        te: "‡∞§‡∞ï‡±ç‡∞∑‡∞£ ‡∞ö‡∞∞‡±ç‡∞Ø ‡∞Ö‡∞µ‡∞∏‡∞∞‡∞Ç ‡∞≤‡±á‡∞¶‡±Å.",
                        ur: "ŸÅŸàÿ±€å ⁄©ÿßÿ±ÿ±Ÿàÿßÿ¶€å ⁄©€å ÿ∂ÿ±Ÿàÿ±ÿ™ ŸÜ€Å€å⁄∫ €Å€í€î"
                    }
                };
            };

            // Generate symptom buttons
            const symptomBtns = document.getElementById('symptom-buttons');
            const symptoms = symptomTranslations[lang] || symptomTranslations['en'];
            const englishSymptoms = symptomTranslations['en'];

            symptoms.forEach((label, i) => {
                const btn = document.createElement('button');
                btn.className = 'symptom-btn';
                btn.textContent = label;
                btn.dataset.symptom = englishSymptoms[i]; // Store English key for logic
                btn.addEventListener('click', function() {
                    this.classList.toggle('selected');
                    document.getElementById('submit-btn').style.display = 'block';
                });
                symptomBtns.appendChild(btn);
            });

            // Handle submit
           document.getElementById('submit-btn').addEventListener('click', async () => {
    const selectedBtns = document.querySelectorAll('.symptom-btn.selected');
    const selectedSymptoms = Array.from(selectedBtns).map(btn => btn.dataset.symptom);

    if (selectedSymptoms.length === 0) {
        alert("Please select at least one symptom.");
        return;
    }

    const analysis = getRiskAnalysis(selectedSymptoms, lang);

    // SIMULATE: In real app, you‚Äôd get Health ID from QR scan or login
    const mockHealthId = "CM-ABC123"; // Replace with real ID in production

    try {
        // Save to backend
        const recordResponse = await fetch('http://localhost:5000/api/records', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                health_id: mockHealthId,
                symptoms: selectedSymptoms.join(','),
                risk_level: analysis.level,
                notes: "AI Symptom Checker Report"
            })
        });

        const recordResult = await recordResponse.json();

        if (recordResult.success) {
            const resultDiv = document.getElementById('result');
            const riskMsg = document.getElementById('risk-message');
            const actionMsg = document.getElementById('action-message');

            resultDiv.className = `alert-${analysis.level}`;
            resultDiv.style.display = 'block';
            riskMsg.textContent = analysis.message[lang] || analysis.message['en'];
            actionMsg.textContent = analysis.action[lang] || analysis.action['en'];

            setTimeout(() => {
                alert("‚úÖ Health record saved to server!");
            }, 1000);
        }
    } catch (error) {
        alert("Failed to save record. Is backend running?");
        console.error(error);
    }

    </script>
</body>
</html>
